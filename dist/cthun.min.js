!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Cthun=e()}(this,(function(){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};function e(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var n=function(){return(n=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function r(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n((function(e){e(t.value)})).then(a,s)}c((r=r.apply(t,e||[])).next())}))}function o(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}var i={env:"production",expiredays:864e5,infoLenMax:1e3};function a(){return n(n(n({},function(){var t=c("uni");if(!t){t=function(t){t=t||10;for(var e="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz123456789",n=e.length,r="",o=0;o<t;o++)r+=e.charAt(Math.floor(Math.random()*n));return r+"_"+(new Date).getTime()}(10);var e=new Date;e.setDate(e.getDate()+i.expiredays),document.cookie="uni="+t+";domain="+document.domain+";path=/;expires="+e.toGMTString()}return{uni:t}}()),u()),{page:window.location.href,uId:c("uId")||"",rId:c("rId")||"",dId:c("deviceId")||"",dt:c("deviceType")||"",sys:c("sys")||"",sv:c("sysVersion")||"",sw:s().w,sh:s().h,v:"0.0.1"})}function s(){return{w:document.documentElement.clientWidth||document.body.clientWidth,h:document.documentElement.clientHeight||document.body.clientHeight}}function c(t){var e,n=new RegExp("(^| )"+t+"=([^;]*)(;|$)");return(e=document.cookie.match(n))?e[2]:null}function u(){var t=navigator.connection;if(!t)return{ct:navigator.onLine?"online":"offline"};var e=t.rtt,n=t.downlink;return{ct:t.effectiveType,cs:n+"Mb/s",cr:e+"ms",csa:t.saveData}}function f(t,e){window.addEventListener&&window.addEventListener(t,(function(t){e.call(this,t)}),!0),window.attachEvent&&window.attachEvent("on"+t,(function(t){e.call(this,t)}))}function l(t,e){window.removeEventListener&&window.removeEventListener(t,e),window.detachEvent&&window.detachEvent(t,e)}function p(t,e){var n;CustomEvent?n=new CustomEvent(t,{detail:e}):((n=window.document.createEvent("HTMLEvents")).initEvent(t,!1,!0),n.detail=e),window.dispatchEvent(n)}function d(t){return(t?h(t.replace(/^#\/?/,"")):"")||"[index]"}function h(t){return t.replace(/^(https?:)?\/\//,"").replace(/\?.*$/,"")}function y(){return"production"===i.env}function v(t,e,n,r){var o=window||global||void 0;if(!o)throw new ReferenceError("the top object is not exist");o._replace_center_||(o._replace_center_={});var i=r?o._replace_center_[r]?o._replace_center_[r]:o._replace_center_[r]={}:o._replace_center_;i[e]||(i[e]=t[e],t[e]=n)}function m(t,e,n){var r=window||global||void 0;if(!r)throw new ReferenceError("the top object is not exist");r._replace_center_||(r._replace_center_={});var o=n?r._replace_center_[n]?r._replace_center_[n]:r._replace_center_[n]={}:r._replace_center_;r._replace_center_[e]&&(t[e]=o[e],delete o[e])}var g=function(){function t(t){this._val=t,this._prev=null,this._next=null}return Object.defineProperty(t.prototype,"val",{get:function(){return this._val},set:function(t){this._val=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"prev",{get:function(){return this._prev},set:function(t){this._prev=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"next",{get:function(){return this._next},set:function(t){this._next=t},enumerable:!0,configurable:!0}),t.prototype.hasPrev=function(){return!!this._prev},t.prototype.hasNext=function(){return!!this._next},t}(),b=function(){function t(){this._count=0,this._header=new g(null),this._tail=new g(null),this._header.next=this._tail,this._tail.prev=this._header}return t.prototype._remove=function(t,e,n){var r=new g(n);return t.next=r.next,e.prev=r.prev,this._count--,n},t.prototype._add=function(t,e,n){var r=new g(n);t.next=r,r.prev=t,e.prev=r,r.next=e,this._count++},t.prototype.add=function(t){this._add(this._tail.prev,this._tail,t)},t.prototype.insert=function(t,e){if(!this.empty())for(var n=this._header.next;n!=this._tail;){if(n.val==t){this._add(n,n.next,e);break}n=n.next}},t.prototype.remove=function(t){if(!this.empty())for(var e=this._header.next;e!==this._tail;){if(e.val==t){var n=this._remove(e.prev,e.next,e.val);return e.next=null,e.prev=null,n}e=e.next}},t.prototype.header=function(){return this._header.next},t.prototype.tail=function(){return this._tail},t.prototype.find=function(t){if(!this.empty()){for(var e=this._header.next;e!==this._tail;){if(e.val==t)return e;e=e.next}return null}},t.prototype.reverse_find=function(t){if(!this.empty()){for(var e=this._tail.prev;e!==this._tail;){if(e.val==t)return e;e=e.prev}return null}},t.prototype.size=function(){return this._count},t.prototype.empty=function(){return 0===this._count},t.prototype.clear=function(){for(var t=this._header.next;t!==this._tail;)t.prev=null,t.val=null,(t=t.next).prev.next=null;this._header.next=this._tail,this._tail.prev=this._header,this._count=0},t}(),_=function(){function t(t){this._strategys=new b,this._strategy=this._strategys.header(),this._api=t.api,this.beforeConsume=t.beforeConsume}return t.prototype.registerStrategy=function(t){return this._strategys.add(t),this},t.prototype.removeStrategy=function(t){return this._strategys.remove(t),this},t.prototype.consume=function(t){return r(this,void 0,void 0,(function(){var e,n;return o(this,(function(r){switch(r.label){case 0:return this.beforeConsume&&(t=this.beforeConsume(t)),e={api:this._api,data:t},this._strategy=this._strategy==this._strategys.tail()?this._strategys.header():this._strategy,(n=this._strategy.val)?[4,this._strategy.val.consume(e)]:[3,2];case 1:n=!r.sent(),r.label=2;case 2:if(!n)return[3,7];this._strategy=this._strategys.header(),r.label=3;case 3:return this._strategy.hasNext()?this._strategy.val&&this._strategy.val.canPass()?[4,this._strategy.val.consume(e)]:[3,5]:[3,6];case 4:if(r.sent())return[2,!0];this._strategy=this._strategy.next,r.label=5;case 5:return[3,3];case 6:return[2,!1];case 7:return[2,!0]}}))}))},function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);i>3&&a&&Object.defineProperty(e,n,a)}([function(t,e,n){return{value:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r(this,void 0,void 0,(function(){var e;return o(this,(function(r){switch(r.label){case 0:return y(),(e=n.value.apply(this,t))instanceof Promise||(e=Promise.resolve(e)),[4,e];case 1:return e=r.sent(),y(),[2,e]}}))}))}}}],t.prototype,"consume",null),t}(),S="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function w(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function T(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function E(t,e){return t(e={exports:{}},e.exports),e.exports}var C=E((function(t,e){
/*!
        localForage -- Offline Storage, Improved
        Version 1.7.3
        https://localforage.github.io/localForage
        (c) 2013-2017 Mozilla, Apache License 2.0
    */
t.exports=function t(e,n,r){function o(a,s){if(!n[a]){if(!e[a]){if(!s&&w)return w();if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};e[a][0].call(u.exports,(function(t){var n=e[a][1][t];return o(n||t)}),u,u.exports,t,e,n,r)}return n[a].exports}for(var i=w,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(t,e,n){(function(t){var n,r,o=t.MutationObserver||t.WebKitMutationObserver;if(o){var i=0,a=new o(f),s=t.document.createTextNode("");a.observe(s,{characterData:!0}),n=function(){s.data=i=++i%2}}else if(t.setImmediate||void 0===t.MessageChannel)n="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){f(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(f,0)};else{var c=new t.MessageChannel;c.port1.onmessage=f,n=function(){c.port2.postMessage(0)}}var u=[];function f(){var t,e;r=!0;for(var n=u.length;n;){for(e=u,u=[],t=-1;++t<n;)e[t]();n=u.length}r=!1}e.exports=function(t){1!==u.push(t)||r||n()}}).call(this,void 0!==S?S:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,n){var r=t(1);function o(){}var i={},a=["REJECTED"],s=["FULFILLED"],c=["PENDING"];function u(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,t!==o&&d(this,t)}function f(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function l(t,e,n){r((function(){var r;try{r=e(n)}catch(e){return i.reject(t,e)}r===t?i.reject(t,new TypeError("Cannot resolve promise with itself")):i.resolve(t,r)}))}function p(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function d(t,e){var n=!1;function r(e){n||(n=!0,i.reject(t,e))}function o(e){n||(n=!0,i.resolve(t,e))}var a=h((function(){e(o,r)}));"error"===a.status&&r(a.value)}function h(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}e.exports=u,u.prototype.catch=function(t){return this.then(null,t)},u.prototype.then=function(t,e){if("function"!=typeof t&&this.state===s||"function"!=typeof e&&this.state===a)return this;var n=new this.constructor(o);return this.state!==c?l(n,this.state===s?t:e,this.outcome):this.queue.push(new f(n,t,e)),n},f.prototype.callFulfilled=function(t){i.resolve(this.promise,t)},f.prototype.otherCallFulfilled=function(t){l(this.promise,this.onFulfilled,t)},f.prototype.callRejected=function(t){i.reject(this.promise,t)},f.prototype.otherCallRejected=function(t){l(this.promise,this.onRejected,t)},i.resolve=function(t,e){var n=h(p,e);if("error"===n.status)return i.reject(t,n.value);var r=n.value;if(r)d(t,r);else{t.state=s,t.outcome=e;for(var o=-1,a=t.queue.length;++o<a;)t.queue[o].callFulfilled(e)}return t},i.reject=function(t,e){t.state=a,t.outcome=e;for(var n=-1,r=t.queue.length;++n<r;)t.queue[n].callRejected(e);return t},u.resolve=function(t){return t instanceof this?t:i.resolve(new this(o),t)},u.reject=function(t){var e=new this(o);return i.reject(e,t)},u.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,r=!1;if(!n)return this.resolve([]);for(var a=new Array(n),s=0,c=-1,u=new this(o);++c<n;)f(t[c],c);return u;function f(t,o){e.resolve(t).then((function(t){a[o]=t,++s!==n||r||(r=!0,i.resolve(u,a))}),(function(t){r||(r=!0,i.reject(u,t))}))}},u.race=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,r=!1;if(!n)return this.resolve([]);for(var a,s=-1,c=new this(o);++s<n;)a=t[s],e.resolve(a).then((function(t){r||(r=!0,i.resolve(c,t))}),(function(t){r||(r=!0,i.reject(c,t))}));return c}},{1:1}],3:[function(t,e,n){(function(e){"function"!=typeof e.Promise&&(e.Promise=t(2))}).call(this,void 0!==S?S:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(t,e,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(t){return}}();function i(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(o){if("TypeError"!==o.name)throw o;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<t.length;r+=1)n.append(t[r]);return n.getBlob(e.type)}}"undefined"==typeof Promise&&t(3);var a=Promise;function s(t,e){e&&t.then((function(t){e(null,t)}),(function(t){e(t)}))}function c(t,e,n){"function"==typeof e&&t.then(e),"function"==typeof n&&t.catch(n)}function u(t){return"string"!=typeof t&&(t=String(t)),t}function f(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var l=void 0,p={},d=Object.prototype.toString;function h(t){return"boolean"==typeof l?a.resolve(l):function(t){return new a((function(e){var n=t.transaction("local-forage-detect-blob-support","readwrite"),r=i([""]);n.objectStore("local-forage-detect-blob-support").put(r,"key"),n.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)},n.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);e(n||!t||parseInt(t[1],10)>=43)}})).catch((function(){return!1}))}(t).then((function(t){return l=t}))}function y(t){var e=p[t.name],n={};n.promise=new a((function(t,e){n.resolve=t,n.reject=e})),e.deferredOperations.push(n),e.dbReady?e.dbReady=e.dbReady.then((function(){return n.promise})):e.dbReady=n.promise}function v(t){var e=p[t.name].deferredOperations.pop();if(e)return e.resolve(),e.promise}function m(t,e){var n=p[t.name].deferredOperations.pop();if(n)return n.reject(e),n.promise}function g(t,e){return new a((function(n,r){if(p[t.name]=p[t.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},t.db){if(!e)return n(t.db);y(t),t.db.close()}var i=[t.name];e&&i.push(t.version);var a=o.open.apply(o,i);e&&(a.onupgradeneeded=function(e){var n=a.result;try{n.createObjectStore(t.storeName),e.oldVersion<=1&&n.createObjectStore("local-forage-detect-blob-support")}catch(t){if("ConstraintError"!==t.name)throw t}}),a.onerror=function(t){t.preventDefault(),r(a.error)},a.onsuccess=function(){n(a.result),v(t)}}))}function b(t){return g(t,!1)}function _(t){return g(t,!0)}function S(t,e){if(!t.db)return!0;var n=!t.db.objectStoreNames.contains(t.storeName),r=t.version<t.db.version,o=t.version>t.db.version;if(r&&(t.version,t.version=t.db.version),o||n){if(n){var i=t.db.version+1;i>t.version&&(t.version=i)}return!0}return!1}function w(t){return i([function(t){for(var e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n),o=0;o<e;o++)r[o]=t.charCodeAt(o);return n}(atob(t.data))],{type:t.type})}function T(t){return t&&t.__local_forage_encoded_blob}function E(t){var e=this,n=e._initReady().then((function(){var t=p[e._dbInfo.name];if(t&&t.dbReady)return t.dbReady}));return c(n,t,t),n}function C(t,e,n,r){void 0===r&&(r=1);try{var o=t.db.transaction(t.storeName,e);n(null,o)}catch(o){if(r>0&&(!t.db||"InvalidStateError"===o.name||"NotFoundError"===o.name))return a.resolve().then((function(){if(!t.db||"NotFoundError"===o.name&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version)return t.db&&(t.version=t.db.version+1),_(t)})).then((function(){return function(t){y(t);for(var e=p[t.name],n=e.forages,r=0;r<n.length;r++){var o=n[r];o._dbInfo.db&&(o._dbInfo.db.close(),o._dbInfo.db=null)}return t.db=null,b(t).then((function(e){return t.db=e,S(t)?_(t):e})).then((function(r){t.db=e.db=r;for(var o=0;o<n.length;o++)n[o]._dbInfo.db=r})).catch((function(e){throw m(t,e),e}))}(t).then((function(){C(t,e,n,r-1)}))})).catch(n);n(o)}}var O={_driver:"asyncStorage",_initStorage:function(t){var e=this,n={db:null};if(t)for(var r in t)n[r]=t[r];var o=p[n.name];o||(o={forages:[],db:null,dbReady:null,deferredOperations:[]},p[n.name]=o),o.forages.push(e),e._initReady||(e._initReady=e.ready,e.ready=E);var i=[];function s(){return a.resolve()}for(var c=0;c<o.forages.length;c++){var u=o.forages[c];u!==e&&i.push(u._initReady().catch(s))}var f=o.forages.slice(0);return a.all(i).then((function(){return n.db=o.db,b(n)})).then((function(t){return n.db=t,S(n,e._defaultConfig.version)?_(n):t})).then((function(t){n.db=o.db=t,e._dbInfo=n;for(var r=0;r<f.length;r++){var i=f[r];i!==e&&(i._dbInfo.db=n.db,i._dbInfo.version=n.version)}}))},_support:function(){try{if(!o)return!1;var t="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),e="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!t||e)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(t){return!1}}(),iterate:function(t,e){var n=this,r=new a((function(e,r){n.ready().then((function(){C(n._dbInfo,"readonly",(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName).openCursor(),s=1;a.onsuccess=function(){var n=a.result;if(n){var r=n.value;T(r)&&(r=w(r));var o=t(r,n.key,s++);void 0!==o?e(o):n.continue()}else e()},a.onerror=function(){r(a.error)}}catch(t){r(t)}}))})).catch(r)}));return s(r,e),r},getItem:function(t,e){var n=this;t=u(t);var r=new a((function(e,r){n.ready().then((function(){C(n._dbInfo,"readonly",(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName).get(t);a.onsuccess=function(){var t=a.result;void 0===t&&(t=null),T(t)&&(t=w(t)),e(t)},a.onerror=function(){r(a.error)}}catch(t){r(t)}}))})).catch(r)}));return s(r,e),r},setItem:function(t,e,n){var r=this;t=u(t);var o=new a((function(n,o){var i;r.ready().then((function(){return i=r._dbInfo,"[object Blob]"===d.call(e)?h(i.db).then((function(t){return t?e:(n=e,new a((function(t,e){var r=new FileReader;r.onerror=e,r.onloadend=function(e){var r=btoa(e.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:n.type})},r.readAsBinaryString(n)})));var n})):e})).then((function(e){C(r._dbInfo,"readwrite",(function(i,a){if(i)return o(i);try{var s=a.objectStore(r._dbInfo.storeName);null===e&&(e=void 0);var c=s.put(e,t);a.oncomplete=function(){void 0===e&&(e=null),n(e)},a.onabort=a.onerror=function(){var t=c.error?c.error:c.transaction.error;o(t)}}catch(t){o(t)}}))})).catch(o)}));return s(o,n),o},removeItem:function(t,e){var n=this;t=u(t);var r=new a((function(e,r){n.ready().then((function(){C(n._dbInfo,"readwrite",(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName).delete(t);i.oncomplete=function(){e()},i.onerror=function(){r(a.error)},i.onabort=function(){var t=a.error?a.error:a.transaction.error;r(t)}}catch(t){r(t)}}))})).catch(r)}));return s(r,e),r},clear:function(t){var e=this,n=new a((function(t,n){e.ready().then((function(){C(e._dbInfo,"readwrite",(function(r,o){if(r)return n(r);try{var i=o.objectStore(e._dbInfo.storeName).clear();o.oncomplete=function(){t()},o.onabort=o.onerror=function(){var t=i.error?i.error:i.transaction.error;n(t)}}catch(t){n(t)}}))})).catch(n)}));return s(n,t),n},length:function(t){var e=this,n=new a((function(t,n){e.ready().then((function(){C(e._dbInfo,"readonly",(function(r,o){if(r)return n(r);try{var i=o.objectStore(e._dbInfo.storeName).count();i.onsuccess=function(){t(i.result)},i.onerror=function(){n(i.error)}}catch(t){n(t)}}))})).catch(n)}));return s(n,t),n},key:function(t,e){var n=this,r=new a((function(e,r){t<0?e(null):n.ready().then((function(){C(n._dbInfo,"readonly",(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName),s=!1,c=a.openCursor();c.onsuccess=function(){var n=c.result;n?0===t?e(n.key):s?e(n.key):(s=!0,n.advance(t)):e(null)},c.onerror=function(){r(c.error)}}catch(t){r(t)}}))})).catch(r)}));return s(r,e),r},keys:function(t){var e=this,n=new a((function(t,n){e.ready().then((function(){C(e._dbInfo,"readonly",(function(r,o){if(r)return n(r);try{var i=o.objectStore(e._dbInfo.storeName).openCursor(),a=[];i.onsuccess=function(){var e=i.result;e?(a.push(e.key),e.continue()):t(a)},i.onerror=function(){n(i.error)}}catch(t){n(t)}}))})).catch(n)}));return s(n,t),n},dropInstance:function(t,e){e=f.apply(this,arguments);var n=this.config();(t="function"!=typeof t&&t||{}).name||(t.name=t.name||n.name,t.storeName=t.storeName||n.storeName);var r,i=this;if(t.name){var c=t.name===n.name&&i._dbInfo.db,u=c?a.resolve(i._dbInfo.db):b(t).then((function(e){var n=p[t.name],r=n.forages;n.db=e;for(var o=0;o<r.length;o++)r[o]._dbInfo.db=e;return e}));r=t.storeName?u.then((function(e){if(e.objectStoreNames.contains(t.storeName)){var n=e.version+1;y(t);var r=p[t.name],i=r.forages;e.close();for(var s=0;s<i.length;s++){var c=i[s];c._dbInfo.db=null,c._dbInfo.version=n}return new a((function(e,r){var i=o.open(t.name,n);i.onerror=function(t){i.result.close(),r(t)},i.onupgradeneeded=function(){i.result.deleteObjectStore(t.storeName)},i.onsuccess=function(){var t=i.result;t.close(),e(t)}})).then((function(t){r.db=t;for(var e=0;e<i.length;e++){var n=i[e];n._dbInfo.db=t,v(n._dbInfo)}})).catch((function(e){throw(m(t,e)||a.resolve()).catch((function(){})),e}))}})):u.then((function(e){y(t);var n=p[t.name],r=n.forages;e.close();for(var i=0;i<r.length;i++)r[i]._dbInfo.db=null;return new a((function(e,n){var r=o.deleteDatabase(t.name);r.onerror=r.onblocked=function(t){var e=r.result;e&&e.close(),n(t)},r.onsuccess=function(){var t=r.result;t&&t.close(),e(t)}})).then((function(t){n.db=t;for(var e=0;e<r.length;e++)v(r[e]._dbInfo)})).catch((function(e){throw(m(t,e)||a.resolve()).catch((function(){})),e}))}))}else r=a.reject("Invalid arguments");return s(r,e),r}},x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",A=/^~~local_forage_type~([^~]+)~/,M="__lfsc__:".length,I=M+"arbf".length,N=Object.prototype.toString;function L(t){var e,n,r,o,i,a=.75*t.length,s=t.length,c=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var u=new ArrayBuffer(a),f=new Uint8Array(u);for(e=0;e<s;e+=4)n=x.indexOf(t[e]),r=x.indexOf(t[e+1]),o=x.indexOf(t[e+2]),i=x.indexOf(t[e+3]),f[c++]=n<<2|r>>4,f[c++]=(15&r)<<4|o>>2,f[c++]=(3&o)<<6|63&i;return u}function j(t){var e,n=new Uint8Array(t),r="";for(e=0;e<n.length;e+=3)r+=x[n[e]>>2],r+=x[(3&n[e])<<4|n[e+1]>>4],r+=x[(15&n[e+1])<<2|n[e+2]>>6],r+=x[63&n[e+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}var P={serialize:function(t,e){var n="";if(t&&(n=N.call(t)),t&&("[object ArrayBuffer]"===n||t.buffer&&"[object ArrayBuffer]"===N.call(t.buffer))){var r,o="__lfsc__:";t instanceof ArrayBuffer?(r=t,o+="arbf"):(r=t.buffer,"[object Int8Array]"===n?o+="si08":"[object Uint8Array]"===n?o+="ui08":"[object Uint8ClampedArray]"===n?o+="uic8":"[object Int16Array]"===n?o+="si16":"[object Uint16Array]"===n?o+="ur16":"[object Int32Array]"===n?o+="si32":"[object Uint32Array]"===n?o+="ui32":"[object Float32Array]"===n?o+="fl32":"[object Float64Array]"===n?o+="fl64":e(new Error("Failed to get type for BinaryArray"))),e(o+j(r))}else if("[object Blob]"===n){var i=new FileReader;i.onload=function(){var n="~~local_forage_type~"+t.type+"~"+j(this.result);e("__lfsc__:blob"+n)},i.readAsArrayBuffer(t)}else try{e(JSON.stringify(t))}catch(t){e(null,t)}},deserialize:function(t){if("__lfsc__:"!==t.substring(0,M))return JSON.parse(t);var e,n=t.substring(I),r=t.substring(M,I);if("blob"===r&&A.test(n)){var o=n.match(A);e=o[1],n=n.substring(o[0].length)}var a=L(n);switch(r){case"arbf":return a;case"blob":return i([a],{type:e});case"si08":return new Int8Array(a);case"ui08":return new Uint8Array(a);case"uic8":return new Uint8ClampedArray(a);case"si16":return new Int16Array(a);case"ur16":return new Uint16Array(a);case"si32":return new Int32Array(a);case"ui32":return new Uint32Array(a);case"fl32":return new Float32Array(a);case"fl64":return new Float64Array(a);default:throw new Error("Unkown type: "+r)}},stringToBuffer:L,bufferToString:j};function k(t,e,n,r){t.executeSql("CREATE TABLE IF NOT EXISTS "+e.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function R(t,e,n,r,o,i){t.executeSql(n,r,o,(function(t,a){a.code===a.SYNTAX_ERR?t.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[e.storeName],(function(t,s){s.rows.length?i(t,a):k(t,e,(function(){t.executeSql(n,r,o,i)}),i)}),i):i(t,a)}),i)}function D(t,e,n,r){var o=this;t=u(t);var i=new a((function(i,a){o.ready().then((function(){void 0===e&&(e=null);var s=e,c=o._dbInfo;c.serializer.serialize(e,(function(e,u){u?a(u):c.db.transaction((function(n){R(n,c,"INSERT OR REPLACE INTO "+c.storeName+" (key, value) VALUES (?, ?)",[t,e],(function(){i(s)}),(function(t,e){a(e)}))}),(function(e){if(e.code===e.QUOTA_ERR){if(r>0)return void i(D.apply(o,[t,s,n,r-1]));a(e)}}))}))})).catch(a)}));return s(i,n),i}function B(t){return new a((function(e,n){t.transaction((function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,r){for(var o=[],i=0;i<r.rows.length;i++)o.push(r.rows.item(i).name);e({db:t,storeNames:o})}),(function(t,e){n(e)}))}),(function(t){n(t)}))}))}var F={_driver:"webSQLStorage",_initStorage:function(t){var e=this,n={db:null};if(t)for(var r in t)n[r]="string"!=typeof t[r]?t[r].toString():t[r];var o=new a((function(t,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(t){return r(t)}n.db.transaction((function(o){k(o,n,(function(){e._dbInfo=n,t()}),(function(t,e){r(e)}))}),r)}));return n.serializer=P,o},_support:"function"==typeof openDatabase,iterate:function(t,e){var n=this,r=new a((function(e,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){R(n,o,"SELECT * FROM "+o.storeName,[],(function(n,r){for(var i=r.rows,a=i.length,s=0;s<a;s++){var c=i.item(s),u=c.value;if(u&&(u=o.serializer.deserialize(u)),void 0!==(u=t(u,c.key,s+1)))return void e(u)}e()}),(function(t,e){r(e)}))}))})).catch(r)}));return s(r,e),r},getItem:function(t,e){var n=this;t=u(t);var r=new a((function(e,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){R(n,o,"SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[t],(function(t,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=o.serializer.deserialize(r)),e(r)}),(function(t,e){r(e)}))}))})).catch(r)}));return s(r,e),r},setItem:function(t,e,n){return D.apply(this,[t,e,n,1])},removeItem:function(t,e){var n=this;t=u(t);var r=new a((function(e,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){R(n,o,"DELETE FROM "+o.storeName+" WHERE key = ?",[t],(function(){e()}),(function(t,e){r(e)}))}))})).catch(r)}));return s(r,e),r},clear:function(t){var e=this,n=new a((function(t,n){e.ready().then((function(){var r=e._dbInfo;r.db.transaction((function(e){R(e,r,"DELETE FROM "+r.storeName,[],(function(){t()}),(function(t,e){n(e)}))}))})).catch(n)}));return s(n,t),n},length:function(t){var e=this,n=new a((function(t,n){e.ready().then((function(){var r=e._dbInfo;r.db.transaction((function(e){R(e,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],(function(e,n){var r=n.rows.item(0).c;t(r)}),(function(t,e){n(e)}))}))})).catch(n)}));return s(n,t),n},key:function(t,e){var n=this,r=new a((function(e,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){R(n,o,"SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[t+1],(function(t,n){var r=n.rows.length?n.rows.item(0).key:null;e(r)}),(function(t,e){r(e)}))}))})).catch(r)}));return s(r,e),r},keys:function(t){var e=this,n=new a((function(t,n){e.ready().then((function(){var r=e._dbInfo;r.db.transaction((function(e){R(e,r,"SELECT key FROM "+r.storeName,[],(function(e,n){for(var r=[],o=0;o<n.rows.length;o++)r.push(n.rows.item(o).key);t(r)}),(function(t,e){n(e)}))}))})).catch(n)}));return s(n,t),n},dropInstance:function(t,e){e=f.apply(this,arguments);var n=this.config();(t="function"!=typeof t&&t||{}).name||(t.name=t.name||n.name,t.storeName=t.storeName||n.storeName);var r,o=this;return s(r=t.name?new a((function(e){var r;r=t.name===n.name?o._dbInfo.db:openDatabase(t.name,"","",0),t.storeName?e({db:r,storeNames:[t.storeName]}):e(B(r))})).then((function(t){return new a((function(e,n){t.db.transaction((function(r){function o(t){return new a((function(e,n){r.executeSql("DROP TABLE IF EXISTS "+t,[],(function(){e()}),(function(t,e){n(e)}))}))}for(var i=[],s=0,c=t.storeNames.length;s<c;s++)i.push(o(t.storeNames[s]));a.all(i).then((function(){e()})).catch((function(t){n(t)}))}),(function(t){n(t)}))}))})):a.reject("Invalid arguments"),e),r}};function H(t,e){var n=t.name+"/";return t.storeName!==e.storeName&&(n+=t.storeName+"/"),n}function z(){return!function(){try{return localStorage.setItem("_localforage_support_test",!0),localStorage.removeItem("_localforage_support_test"),!1}catch(t){return!0}}()||localStorage.length>0}var U={_driver:"localStorageWrapper",_initStorage:function(t){var e={};if(t)for(var n in t)e[n]=t[n];return e.keyPrefix=H(t,this._defaultConfig),z()?(this._dbInfo=e,e.serializer=P,a.resolve()):a.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(t){return!1}}(),iterate:function(t,e){var n=this,r=n.ready().then((function(){for(var e=n._dbInfo,r=e.keyPrefix,o=r.length,i=localStorage.length,a=1,s=0;s<i;s++){var c=localStorage.key(s);if(0===c.indexOf(r)){var u=localStorage.getItem(c);if(u&&(u=e.serializer.deserialize(u)),void 0!==(u=t(u,c.substring(o),a++)))return u}}}));return s(r,e),r},getItem:function(t,e){var n=this;t=u(t);var r=n.ready().then((function(){var e=n._dbInfo,r=localStorage.getItem(e.keyPrefix+t);return r&&(r=e.serializer.deserialize(r)),r}));return s(r,e),r},setItem:function(t,e,n){var r=this;t=u(t);var o=r.ready().then((function(){void 0===e&&(e=null);var n=e;return new a((function(o,i){var a=r._dbInfo;a.serializer.serialize(e,(function(e,r){if(r)i(r);else try{localStorage.setItem(a.keyPrefix+t,e),o(n)}catch(t){"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||i(t),i(t)}}))}))}));return s(o,n),o},removeItem:function(t,e){var n=this;t=u(t);var r=n.ready().then((function(){var e=n._dbInfo;localStorage.removeItem(e.keyPrefix+t)}));return s(r,e),r},clear:function(t){var e=this,n=e.ready().then((function(){for(var t=e._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(t)&&localStorage.removeItem(r)}}));return s(n,t),n},length:function(t){var e=this.keys().then((function(t){return t.length}));return s(e,t),e},key:function(t,e){var n=this,r=n.ready().then((function(){var e,r=n._dbInfo;try{e=localStorage.key(t)}catch(t){e=null}return e&&(e=e.substring(r.keyPrefix.length)),e}));return s(r,e),r},keys:function(t){var e=this,n=e.ready().then((function(){for(var t=e._dbInfo,n=localStorage.length,r=[],o=0;o<n;o++){var i=localStorage.key(o);0===i.indexOf(t.keyPrefix)&&r.push(i.substring(t.keyPrefix.length))}return r}));return s(n,t),n},dropInstance:function(t,e){if(e=f.apply(this,arguments),!(t="function"!=typeof t&&t||{}).name){var n=this.config();t.name=t.name||n.name,t.storeName=t.storeName||n.storeName}var r,o=this;return s(r=t.name?new a((function(e){t.storeName?e(H(t,o._defaultConfig)):e(t.name+"/")})).then((function(t){for(var e=localStorage.length-1;e>=0;e--){var n=localStorage.key(e);0===n.indexOf(t)&&localStorage.removeItem(n)}})):a.reject("Invalid arguments"),e),r}},q=function(t,e){for(var n,r,o=t.length,i=0;i<o;){if((n=t[i])===(r=e)||"number"==typeof n&&"number"==typeof r&&isNaN(n)&&isNaN(r))return!0;i++}return!1},W=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},V={},K={},J={INDEXEDDB:O,WEBSQL:F,LOCALSTORAGE:U},Q=[J.INDEXEDDB._driver,J.WEBSQL._driver,J.LOCALSTORAGE._driver],X=["dropInstance"],G=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(X),$={description:"",driver:Q.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Y(t,e){t[e]=function(){var n=arguments;return t.ready().then((function(){return t[e].apply(t,n)}))}}function Z(){for(var t=1;t<arguments.length;t++){var e=arguments[t];if(e)for(var n in e)e.hasOwnProperty(n)&&(W(e[n])?arguments[0][n]=e[n].slice():arguments[0][n]=e[n])}return arguments[0]}var tt=new(function(){function t(e){for(var n in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),J)if(J.hasOwnProperty(n)){var r=J[n],o=r._driver;this[n]=o,V[o]||this.defineDriver(r)}this._defaultConfig=Z({},$),this._config=Z({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return t.prototype.config=function(t){if("object"===(void 0===t?"undefined":r(t))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var e in t){if("storeName"===e&&(t[e]=t[e].replace(/\W/g,"_")),"version"===e&&"number"!=typeof t[e])return new Error("Database version must be a number.");this._config[e]=t[e]}return!("driver"in t&&t.driver)||this.setDriver(this._config.driver)}return"string"==typeof t?this._config[t]:this._config},t.prototype.defineDriver=function(t,e,n){var r=new a((function(e,n){try{var r=t._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver)return void n(o);for(var i=G.concat("_initStorage"),c=0,u=i.length;c<u;c++){var f=i[c];if((!q(X,f)||t[f])&&"function"!=typeof t[f])return void n(o)}!function(){for(var e=function(t){return function(){var e=new Error("Method "+t+" is not implemented by the current driver"),n=a.reject(e);return s(n,arguments[arguments.length-1]),n}},n=0,r=X.length;n<r;n++){var o=X[n];t[o]||(t[o]=e(o))}}();var l=function(n){V[r],V[r]=t,K[r]=n,e()};"_support"in t?t._support&&"function"==typeof t._support?t._support().then(l,n):l(!!t._support):l(!0)}catch(t){n(t)}}));return c(r,e,n),r},t.prototype.driver=function(){return this._driver||null},t.prototype.getDriver=function(t,e,n){var r=V[t]?a.resolve(V[t]):a.reject(new Error("Driver not found."));return c(r,e,n),r},t.prototype.getSerializer=function(t){var e=a.resolve(P);return c(e,t),e},t.prototype.ready=function(t){var e=this,n=e._driverSet.then((function(){return null===e._ready&&(e._ready=e._initDriver()),e._ready}));return c(n,t,t),n},t.prototype.setDriver=function(t,e,n){var r=this;W(t)||(t=[t]);var o=this._getSupportedDrivers(t);function i(){r._config.driver=r.driver()}function s(t){return r._extend(t),i(),r._ready=r._initStorage(r._config),r._ready}var u=null!==this._driverSet?this._driverSet.catch((function(){return a.resolve()})):a.resolve();return this._driverSet=u.then((function(){var t=o[0];return r._dbInfo=null,r._ready=null,r.getDriver(t).then((function(t){r._driver=t._driver,i(),r._wrapLibraryMethodsWithReady(),r._initDriver=function(t){return function(){var e=0;return function n(){for(;e<t.length;){var o=t[e];return e++,r._dbInfo=null,r._ready=null,r.getDriver(o).then(s).catch(n)}i();var c=new Error("No available storage method found.");return r._driverSet=a.reject(c),r._driverSet}()}}(o)}))})).catch((function(){i();var t=new Error("No available storage method found.");return r._driverSet=a.reject(t),r._driverSet})),c(this._driverSet,e,n),this._driverSet},t.prototype.supports=function(t){return!!K[t]},t.prototype._extend=function(t){Z(this,t)},t.prototype._getSupportedDrivers=function(t){for(var e=[],n=0,r=t.length;n<r;n++){var o=t[n];this.supports(o)&&e.push(o)}return e},t.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,e=G.length;t<e;t++)Y(this,G[t])},t.prototype.createInstance=function(e){return new t(e)},t}());e.exports=tt},{3:3}]},{},[4])(4)})),O=function(){function t(t){this.shiftKeys=[],this.forage=C.createInstance({name:t,storeName:t})}return t.getInstance=function(e){if(!t.instance&&!e)throw new Error("appid must be passed the first time to obtain the instance object!");return t.instance||(t.instance=new t(e)),t.instance},t.prototype.cleanShift=function(){return r(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return this.shiftKeys.length>0?[4,this.forage.removeItem(this.shiftKeys.pop())]:[3,2];case 1:return t.sent(),[3,0];case 2:return this.shiftKeys=[],[2]}}))}))},t.prototype.shift=function(t,e){return void 0===e&&(e=!0),r(this,void 0,void 0,(function(){var n,r,i,a,s;return o(this,(function(o){switch(o.label){case 0:return n=[],[4,this.keys()];case 1:r=o.sent(),o.label=2;case 2:return t&&r.length>0?(i=r.shift()||"",s=(a=n).push,[4,this.forage.getItem(i)]):[3,4];case 3:return s.apply(a,[o.sent()]),this.shiftKeys.push(i),t--,[3,2];case 4:return e?[4,this.cleanShift()]:[3,6];case 5:o.sent(),o.label=6;case 6:return[2,n]}}))}))},t.prototype.push=function(t){return r(this,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return e=(new Date).getTime()+"",[4,this.forage.setItem(e,t)];case 1:return n.sent(),[2]}}))}))},t.prototype.length=function(){return r(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this.forage.length()];case 1:return[2,t.sent()]}}))}))},t.prototype.clear=function(){return r(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this.forage.clear()];case 1:return[2,t.sent()]}}))}))},t.prototype.keys=function(){return r(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this.forage.keys()];case 1:return[2,t.sent()]}}))}))},t.prototype.iterate=function(t){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,this.forage.iterate(t)];case 1:return[2,e.sent()]}}))}))},t}(),x=function(){function t(t){this.consumers=new b,"string"==typeof t?O.getInstance(t):O.getInstance(t.appId)}return t.prototype.start=function(t,e){var n=this;void 0===t&&(t=15e3),void 0===e&&(e=10),this.timer&&clearInterval(this.timer),this.timer=window.setInterval((function(){return r(n,void 0,void 0,(function(){var t,n;return o(this,(function(r){switch(r.label){case 0:return this.consumers.size()>0?(t=this.consumers.header(),[4,O.getInstance().shift(e,!1)]):[3,6];case 1:n=r.sent(),r.label=2;case 2:return t.hasNext()&&n.length>-1?[4,t.val.consume("string"==typeof n?n:JSON.stringify(n))]:[3,6];case 3:return r.sent()?[4,O.getInstance().cleanShift()]:[3,5];case 4:r.sent(),r.label=5;case 5:return t=t.next,[3,2];case 6:return[2]}}))}))}),t)},t.prototype.stop=function(){clearInterval(this.timer),this.timer=void 0},t.prototype.subscribe=function(t){return this.consumers.add(new _(t)),this.consumers.tail().val},t}(),A=function(){function t(t){this.nums=[],this.reserved=t}return t.prototype.get=function(){var t=this,e=Date.now();return this.nums=this.nums.filter((function(n){return n>e-1e3*t.reserved})),this.nums.length},t.prototype.increase=function(){var t=this,e=Date.now();this.nums=this.nums.filter((function(n){return n>e-1e3*t.reserved})),this.nums.push(Date.now())},t.prototype.decrease=function(){this.nums.shift()},t.prototype.reset=function(){this.nums=[]},t}(),M=function(){function t(t){void 0===t&&(t=Date.now()),this.startTime=t}return t.prototype.canPass=function(t){return!0},t.prototype.checkout=function(t){},t}(),I=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.canPass=function(t){var e=parseInt(t.thresholdForHalfOpen[0]);return t.getCount()<=e},n.prototype.checkout=function(t){t.getCount()>parseInt(t.thresholdForHalfOpen[0])?t.setState(new N):t.setState(new L)},n}(M),N=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.canPass=function(){return!1},n.prototype.checkout=function(t){var e=1e3*t.idleTimeForOpen;Date.now()>=this.startTime+e&&t.setState(new I)},n}(M),L=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.canPass=function(t){return!0},n.prototype.checkout=function(t){t.getCount()>=parseInt(t.thresholdForOpen[0])&&t.setState(new N)},n}(M),j=function(){function t(t){this.idleTimeForOpen=t.idleTimeForOpen,this.thresholdForOpen=t.thresholdForOpen.split("/"),this.thresholdForHalfOpen=t.thresholdForHalfOpen.split("/"),this.counter=new A(Math.max(parseInt(this.thresholdForOpen[1]),parseInt(this.thresholdForHalfOpen[1]))),this.state=new L}return t.prototype.getStateName=function(){return/^function\s(.*)\(/.exec(this.state.constructor+""),RegExp.$1},t.prototype.getState=function(){return this.state},t.prototype.setState=function(t){this.state=t},t.prototype.reset=function(){this.counter.reset()},t.prototype.canPass=function(){return this.getState().checkout(this),this.getState().canPass(this)},t.prototype.count=function(){this.counter.increase()},t.prototype.getCount=function(){return this.counter.get()},t.prototype.getDuration=function(){return(Date.now()-this.state.startTime)/1e3},t}(),P=function(){function t(t){void 0===t&&(t={breakerOptions:{thresholdForOpen:"5/60",idleTimeForOpen:300,thresholdForHalfOpen:"1/60"}}),this.abnormalBreaker=new j(t.breakerOptions)}return t.prototype.canPass=function(){return this.abnormalBreaker.canPass()},t.prototype.count=function(){return this.abnormalBreaker.count()},t}(),k=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.consume=function(t){if(!window||!window.navigator||"function"!=typeof window.navigator.sendBeacon)return Promise.reject(new Error("current enviment not support sendBeacon!"));var e=new FormData;for(var n in t)e.append(n,t[n]);return new Promise((function(n,r){window.navigator.sendBeacon(t.api,e)?n():r()}))},n}(P),R=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}},D=Object.prototype.toString;function B(t){return"[object Array]"===D.call(t)}function F(t){return void 0===t}function H(t){return null!==t&&"object"==typeof t}function z(t){return"[object Function]"===D.call(t)}function U(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),B(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(null,t[o],o,t)}var q={isArray:B,isArrayBuffer:function(t){return"[object ArrayBuffer]"===D.call(t)},isBuffer:function(t){return null!==t&&!F(t)&&null!==t.constructor&&!F(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:H,isUndefined:F,isDate:function(t){return"[object Date]"===D.call(t)},isFile:function(t){return"[object File]"===D.call(t)},isBlob:function(t){return"[object Blob]"===D.call(t)},isFunction:z,isStream:function(t){return H(t)&&z(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:U,merge:function t(){var e={};function n(n,r){"object"==typeof e[r]&&"object"==typeof n?e[r]=t(e[r],n):e[r]=n}for(var r=0,o=arguments.length;r<o;r++)U(arguments[r],n);return e},deepMerge:function t(){var e={};function n(n,r){"object"==typeof e[r]&&"object"==typeof n?e[r]=t(e[r],n):e[r]="object"==typeof n?t({},n):n}for(var r=0,o=arguments.length;r<o;r++)U(arguments[r],n);return e},extend:function(t,e,n){return U(e,(function(e,r){t[r]=n&&"function"==typeof e?R(e,n):e})),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}};function W(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var V=function(t,e,n){if(!e)return t;var r;if(n)r=n(e);else if(q.isURLSearchParams(e))r=e.toString();else{var o=[];q.forEach(e,(function(t,e){null!=t&&(q.isArray(t)?e+="[]":t=[t],q.forEach(t,(function(t){q.isDate(t)?t=t.toISOString():q.isObject(t)&&(t=JSON.stringify(t)),o.push(W(e)+"="+W(t))})))})),r=o.join("&")}if(r){var i=t.indexOf("#");-1!==i&&(t=t.slice(0,i)),t+=(-1===t.indexOf("?")?"?":"&")+r}return t};function K(){this.handlers=[]}K.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},K.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},K.prototype.forEach=function(t){q.forEach(this.handlers,(function(e){null!==e&&t(e)}))};var J=K,Q=function(t,e,n){return q.forEach(n,(function(n){t=n(t,e)})),t},X=function(t){return!(!t||!t.__CANCEL__)},G=function(t,e){q.forEach(t,(function(n,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[r])}))},$=function(t,e,n,r,o){return function(t,e,n,r,o){return t.config=e,n&&(t.code=n),t.request=r,t.response=o,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}(new Error(t),e,n,r,o)},Y=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],Z=q.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(t){var r=t;return e&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=r(window.location.href),function(e){var n=q.isString(e)?r(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return!0},tt=q.isStandardBrowserEnv()?{write:function(t,e,n,r,o,i){var a=[];a.push(t+"="+encodeURIComponent(e)),q.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),q.isString(r)&&a.push("path="+r),q.isString(o)&&a.push("domain="+o),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},et=function(t){return new Promise((function(e,n){var r=t.data,o=t.headers;q.isFormData(r)&&delete o["Content-Type"];var i=new XMLHttpRequest;if(t.auth){var a=t.auth.username||"",s=t.auth.password||"";o.Authorization="Basic "+btoa(a+":"+s)}var c,u,f=(c=t.baseURL,u=t.url,c&&!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(u)?function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}(c,u):u);if(i.open(t.method.toUpperCase(),V(f,t.params,t.paramsSerializer),!0),i.timeout=t.timeout,i.onreadystatechange=function(){if(i&&4===i.readyState&&(0!==i.status||i.responseURL&&0===i.responseURL.indexOf("file:"))){var r,o,a,s,c,u="getAllResponseHeaders"in i?(r=i.getAllResponseHeaders(),c={},r?(q.forEach(r.split("\n"),(function(t){if(s=t.indexOf(":"),o=q.trim(t.substr(0,s)).toLowerCase(),a=q.trim(t.substr(s+1)),o){if(c[o]&&Y.indexOf(o)>=0)return;c[o]="set-cookie"===o?(c[o]?c[o]:[]).concat([a]):c[o]?c[o]+", "+a:a}})),c):c):null,f={data:t.responseType&&"text"!==t.responseType?i.response:i.responseText,status:i.status,statusText:i.statusText,headers:u,config:t,request:i};!function(t,e,n){var r=n.config.validateStatus;!r||r(n.status)?t(n):e($("Request failed with status code "+n.status,n.config,null,n.request,n))}(e,n,f),i=null}},i.onabort=function(){i&&(n($("Request aborted",t,"ECONNABORTED",i)),i=null)},i.onerror=function(){n($("Network Error",t,null,i)),i=null},i.ontimeout=function(){var e="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n($(e,t,"ECONNABORTED",i)),i=null},q.isStandardBrowserEnv()){var l=tt,p=(t.withCredentials||Z(f))&&t.xsrfCookieName?l.read(t.xsrfCookieName):void 0;p&&(o[t.xsrfHeaderName]=p)}if("setRequestHeader"in i&&q.forEach(o,(function(t,e){void 0===r&&"content-type"===e.toLowerCase()?delete o[e]:i.setRequestHeader(e,t)})),q.isUndefined(t.withCredentials)||(i.withCredentials=!!t.withCredentials),t.responseType)try{i.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&i.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&i.upload&&i.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then((function(t){i&&(i.abort(),n(t),i=null)})),void 0===r&&(r=null),i.send(r)}))},nt={"Content-Type":"application/x-www-form-urlencoded"};function rt(t,e){!q.isUndefined(t)&&q.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var ot,it={adapter:("undefined"!=typeof XMLHttpRequest?ot=et:"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)&&(ot=et),ot),transformRequest:[function(t,e){return G(e,"Accept"),G(e,"Content-Type"),q.isFormData(t)||q.isArrayBuffer(t)||q.isBuffer(t)||q.isStream(t)||q.isFile(t)||q.isBlob(t)?t:q.isArrayBufferView(t)?t.buffer:q.isURLSearchParams(t)?(rt(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):q.isObject(t)?(rt(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300}};it.headers={common:{Accept:"application/json, text/plain, */*"}},q.forEach(["delete","get","head"],(function(t){it.headers[t]={}})),q.forEach(["post","put","patch"],(function(t){it.headers[t]=q.merge(nt)}));var at=it;function st(t){t.cancelToken&&t.cancelToken.throwIfRequested()}var ct=function(t){return st(t),t.headers=t.headers||{},t.data=Q(t.data,t.headers,t.transformRequest),t.headers=q.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),q.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||at.adapter)(t).then((function(e){return st(t),e.data=Q(e.data,e.headers,t.transformResponse),e}),(function(e){return X(e)||(st(t),e&&e.response&&(e.response.data=Q(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))},ut=function(t,e){e=e||{};var n={},r=["url","method","params","data"],o=["headers","auth","proxy"],i=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];q.forEach(r,(function(t){void 0!==e[t]&&(n[t]=e[t])})),q.forEach(o,(function(r){q.isObject(e[r])?n[r]=q.deepMerge(t[r],e[r]):void 0!==e[r]?n[r]=e[r]:q.isObject(t[r])?n[r]=q.deepMerge(t[r]):void 0!==t[r]&&(n[r]=t[r])})),q.forEach(i,(function(r){void 0!==e[r]?n[r]=e[r]:void 0!==t[r]&&(n[r]=t[r])}));var a=r.concat(o).concat(i),s=Object.keys(e).filter((function(t){return-1===a.indexOf(t)}));return q.forEach(s,(function(r){void 0!==e[r]?n[r]=e[r]:void 0!==t[r]&&(n[r]=t[r])})),n};function ft(t){this.defaults=t,this.interceptors={request:new J,response:new J}}ft.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=ut(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=[ct,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach((function(t){e.unshift(t.fulfilled,t.rejected)})),this.interceptors.response.forEach((function(t){e.push(t.fulfilled,t.rejected)}));e.length;)n=n.then(e.shift(),e.shift());return n},ft.prototype.getUri=function(t){return t=ut(this.defaults,t),V(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},q.forEach(["delete","get","head","options"],(function(t){ft.prototype[t]=function(e,n){return this.request(q.merge(n||{},{method:t,url:e}))}})),q.forEach(["post","put","patch"],(function(t){ft.prototype[t]=function(e,n,r){return this.request(q.merge(r||{},{method:t,url:e,data:n}))}}));var lt=ft;function pt(t){this.message=t}pt.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},pt.prototype.__CANCEL__=!0;var dt=pt;function ht(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var n=this;t((function(t){n.reason||(n.reason=new dt(t),e(n.reason))}))}ht.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},ht.source=function(){var t;return{token:new ht((function(e){t=e})),cancel:t}};var yt=ht;function vt(t){var e=new lt(t),n=R(lt.prototype.request,e);return q.extend(n,lt.prototype,e),q.extend(n,e),n}var mt=vt(at);mt.Axios=lt,mt.create=function(t){return vt(ut(mt.defaults,t))},mt.Cancel=dt,mt.CancelToken=yt,mt.isCancel=X,mt.all=function(t){return Promise.all(t)},mt.spread=function(t){return function(e){return t.apply(null,e)}};var gt=mt,bt=mt;gt.default=bt;var _t=gt,St=Object.prototype.hasOwnProperty,wt=Array.isArray,Tt=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),Et=function(t,e){for(var n=e&&e.plainObjects?Object.create(null):{},r=0;r<t.length;++r)void 0!==t[r]&&(n[r]=t[r]);return n},Ct={arrayToObject:Et,assign:function(t,e){return Object.keys(e).reduce((function(t,n){return t[n]=e[n],t}),t)},combine:function(t,e){return[].concat(t,e)},compact:function(t){for(var e=[{obj:{o:t},prop:"o"}],n=[],r=0;r<e.length;++r)for(var o=e[r],i=o.obj[o.prop],a=Object.keys(i),s=0;s<a.length;++s){var c=a[s],u=i[c];"object"==typeof u&&null!==u&&-1===n.indexOf(u)&&(e.push({obj:i,prop:c}),n.push(u))}return function(t){for(;t.length>1;){var e=t.pop(),n=e.obj[e.prop];if(wt(n)){for(var r=[],o=0;o<n.length;++o)void 0!==n[o]&&r.push(n[o]);e.obj[e.prop]=r}}}(e),t},decode:function(t,e,n){var r=t.replace(/\+/g," ");if("iso-8859-1"===n)return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch(t){return r}},encode:function(t,e,n){if(0===t.length)return t;var r=t;if("symbol"==typeof t?r=Symbol.prototype.toString.call(t):"string"!=typeof t&&(r=String(t)),"iso-8859-1"===n)return escape(r).replace(/%u[0-9a-f]{4}/gi,(function(t){return"%26%23"+parseInt(t.slice(2),16)+"%3B"}));for(var o="",i=0;i<r.length;++i){var a=r.charCodeAt(i);45===a||46===a||95===a||126===a||a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122?o+=r.charAt(i):a<128?o+=Tt[a]:a<2048?o+=Tt[192|a>>6]+Tt[128|63&a]:a<55296||a>=57344?o+=Tt[224|a>>12]+Tt[128|a>>6&63]+Tt[128|63&a]:(i+=1,a=65536+((1023&a)<<10|1023&r.charCodeAt(i)),o+=Tt[240|a>>18]+Tt[128|a>>12&63]+Tt[128|a>>6&63]+Tt[128|63&a])}return o},isBuffer:function(t){return!(!t||"object"!=typeof t)&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},merge:function t(e,n,r){if(!n)return e;if("object"!=typeof n){if(wt(e))e.push(n);else{if(!e||"object"!=typeof e)return[e,n];(r&&(r.plainObjects||r.allowPrototypes)||!St.call(Object.prototype,n))&&(e[n]=!0)}return e}if(!e||"object"!=typeof e)return[e].concat(n);var o=e;return wt(e)&&!wt(n)&&(o=Et(e,r)),wt(e)&&wt(n)?(n.forEach((function(n,o){if(St.call(e,o)){var i=e[o];i&&"object"==typeof i&&n&&"object"==typeof n?e[o]=t(i,n,r):e.push(n)}else e[o]=n})),e):Object.keys(n).reduce((function(e,o){var i=n[o];return St.call(e,o)?e[o]=t(e[o],i,r):e[o]=i,e}),o)}},Ot=String.prototype.replace,xt=/%20/g,At={RFC1738:"RFC1738",RFC3986:"RFC3986"},Mt=Ct.assign({default:At.RFC3986,formatters:{RFC1738:function(t){return Ot.call(t,xt,"+")},RFC3986:function(t){return String(t)}}},At),It=Object.prototype.hasOwnProperty,Nt={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},Lt=Array.isArray,jt=Array.prototype.push,Pt=function(t,e){jt.apply(t,Lt(e)?e:[e])},kt=Date.prototype.toISOString,Rt=Mt.default,Dt={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:Ct.encode,encodeValuesOnly:!1,format:Rt,formatter:Mt.formatters[Rt],indices:!1,serializeDate:function(t){return kt.call(t)},skipNulls:!1,strictNullHandling:!1},Bt=function t(e,n,r,o,i,a,s,c,u,f,l,p,d){var h,y=e;if("function"==typeof s?y=s(n,y):y instanceof Date?y=f(y):"comma"===r&&Lt(y)&&(y=y.join(",")),null===y){if(o)return a&&!p?a(n,Dt.encoder,d,"key"):n;y=""}if("string"==typeof(h=y)||"number"==typeof h||"boolean"==typeof h||"symbol"==typeof h||"bigint"==typeof h||Ct.isBuffer(y))return a?[l(p?n:a(n,Dt.encoder,d,"key"))+"="+l(a(y,Dt.encoder,d,"value"))]:[l(n)+"="+l(String(y))];var v,m=[];if(void 0===y)return m;if(Lt(s))v=s;else{var g=Object.keys(y);v=c?g.sort(c):g}for(var b=0;b<v.length;++b){var _=v[b];i&&null===y[_]||(Lt(y)?Pt(m,t(y[_],"function"==typeof r?r(n,_):n,r,o,i,a,s,c,u,f,l,p,d)):Pt(m,t(y[_],n+(u?"."+_:"["+_+"]"),r,o,i,a,s,c,u,f,l,p,d)))}return m},Ft=(Object.prototype.hasOwnProperty,Array.isArray,function(t,e){var n,r=t,o=function(t){if(!t)return Dt;if(null!==t.encoder&&void 0!==t.encoder&&"function"!=typeof t.encoder)throw new TypeError("Encoder has to be a function.");var e=t.charset||Dt.charset;if(void 0!==t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=Mt.default;if(void 0!==t.format){if(!It.call(Mt.formatters,t.format))throw new TypeError("Unknown format option provided.");n=t.format}var r=Mt.formatters[n],o=Dt.filter;return("function"==typeof t.filter||Lt(t.filter))&&(o=t.filter),{addQueryPrefix:"boolean"==typeof t.addQueryPrefix?t.addQueryPrefix:Dt.addQueryPrefix,allowDots:void 0===t.allowDots?Dt.allowDots:!!t.allowDots,charset:e,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:Dt.charsetSentinel,delimiter:void 0===t.delimiter?Dt.delimiter:t.delimiter,encode:"boolean"==typeof t.encode?t.encode:Dt.encode,encoder:"function"==typeof t.encoder?t.encoder:Dt.encoder,encodeValuesOnly:"boolean"==typeof t.encodeValuesOnly?t.encodeValuesOnly:Dt.encodeValuesOnly,filter:o,formatter:r,serializeDate:"function"==typeof t.serializeDate?t.serializeDate:Dt.serializeDate,skipNulls:"boolean"==typeof t.skipNulls?t.skipNulls:Dt.skipNulls,sort:"function"==typeof t.sort?t.sort:null,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:Dt.strictNullHandling}}(e);"function"==typeof o.filter?r=(0,o.filter)("",r):Lt(o.filter)&&(n=o.filter);var i,a=[];if("object"!=typeof r||null===r)return"";i=e&&e.arrayFormat in Nt?e.arrayFormat:e&&"indices"in e?e.indices?"indices":"repeat":"indices";var s=Nt[i];n||(n=Object.keys(r)),o.sort&&n.sort(o.sort);for(var c=0;c<n.length;++c){var u=n[c];o.skipNulls&&null===r[u]||Pt(a,Bt(r[u],u,s,o.strictNullHandling,o.skipNulls,o.encode?o.encoder:null,o.filter,o.sort,o.allowDots,o.serializeDate,o.formatter,o.encodeValuesOnly,o.charset))}var f=a.join(o.delimiter),l=!0===o.addQueryPrefix?"?":"";return o.charsetSentinel&&("iso-8859-1"===o.charset?l+="utf8=%26%2310003%3B&":l+="utf8=%E2%9C%93&"),f.length>0?l+f:""}),Ht=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.consume=function(t){return _t.post(t.api,Ft(t),{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},n}(P),zt=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.consume=function(t){var e=new Image(1,1);return new Promise((function(n,r){e.onerror=function(t){r(t)},e.onload=function(t){n(t)},e.onabort=function(t){r(t)};var o=[];for(var i in t)o.push(i+"="+t[i]);e.src=t.api+"?"+o.join("&")}))},n}(P),Ut=function(){function t(){}return t.prototype.collect=function(t){t=n(n(n({},a()),u()),t),O.getInstance().push(t)},t}(),qt=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.listener=function(t){if(t.stopPropagation(),t.preventDefault(),t.target instanceof HTMLImageElement||t.target instanceof HTMLScriptElement||t.target instanceof HTMLLinkElement){var e=t.target instanceof HTMLImageElement||t.target instanceof HTMLScriptElement?t.target.src:t.target instanceof HTMLLinkElement?t.target.href:"";this.collect({msg:t.target.outerHTML,file:e,stack:t.target.localName.toUpperCase(),line:0,col:0,ms:"error",ml:"error"})}else{var n="";if(t.error&&t.error.stack)n=t.error.stack.toString();else if(arguments){for(var r=[],o=arguments.callee.caller,i=3;o&&--i>0&&(r.push(o.toString()),o!==o.caller);)o=o.caller;n=r.join(",")}this.collect({file:t.filename,line:t.lineno,col:t.colno,stack:n,msg:t.message,ms:"error",ml:"error"})}},n.prototype.start=function(){f("error",this.listener.bind(this))},n.prototype.stop=function(){l("error",this.listener.bind(this))},n}(Ut),Wt=E((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this._typeMetadatas=new Map,this._transformMetadatas=new Map,this._exposeMetadatas=new Map,this._excludeMetadatas=new Map,this._ancestorsMap=new Map}return t.prototype.addTypeMetadata=function(t){this._typeMetadatas.has(t.target)||this._typeMetadatas.set(t.target,new Map),this._typeMetadatas.get(t.target).set(t.propertyName,t)},t.prototype.addTransformMetadata=function(t){this._transformMetadatas.has(t.target)||this._transformMetadatas.set(t.target,new Map),this._transformMetadatas.get(t.target).has(t.propertyName)||this._transformMetadatas.get(t.target).set(t.propertyName,[]),this._transformMetadatas.get(t.target).get(t.propertyName).push(t)},t.prototype.addExposeMetadata=function(t){this._exposeMetadatas.has(t.target)||this._exposeMetadatas.set(t.target,new Map),this._exposeMetadatas.get(t.target).set(t.propertyName,t)},t.prototype.addExcludeMetadata=function(t){this._excludeMetadatas.has(t.target)||this._excludeMetadatas.set(t.target,new Map),this._excludeMetadatas.get(t.target).set(t.propertyName,t)},t.prototype.findTransformMetadatas=function(t,e,n){return this.findMetadatas(this._transformMetadatas,t,e).filter((function(t){return!t.options||(!0===t.options.toClassOnly&&!0===t.options.toPlainOnly||(!0===t.options.toClassOnly?n===Kt.TransformationType.CLASS_TO_CLASS||n===Kt.TransformationType.PLAIN_TO_CLASS:!0!==t.options.toPlainOnly||n===Kt.TransformationType.CLASS_TO_PLAIN))}))},t.prototype.findExcludeMetadata=function(t,e){return this.findMetadata(this._excludeMetadatas,t,e)},t.prototype.findExposeMetadata=function(t,e){return this.findMetadata(this._exposeMetadatas,t,e)},t.prototype.findExposeMetadataByCustomName=function(t,e){return this.getExposedMetadatas(t).find((function(t){return t.options&&t.options.name===e}))},t.prototype.findTypeMetadata=function(t,e){return this.findMetadata(this._typeMetadatas,t,e)},t.prototype.getStrategy=function(t){var e=this._excludeMetadatas.get(t),n=e&&e.get(void 0),r=this._exposeMetadatas.get(t),o=r&&r.get(void 0);return n&&o||!n&&!o?"none":n?"excludeAll":"exposeAll"},t.prototype.getExposedMetadatas=function(t){return this.getMetadata(this._exposeMetadatas,t)},t.prototype.getExcludedMetadatas=function(t){return this.getMetadata(this._excludeMetadatas,t)},t.prototype.getExposedProperties=function(t,e){return this.getExposedMetadatas(t).filter((function(t){return!t.options||(!0===t.options.toClassOnly&&!0===t.options.toPlainOnly||(!0===t.options.toClassOnly?e===Kt.TransformationType.CLASS_TO_CLASS||e===Kt.TransformationType.PLAIN_TO_CLASS:!0!==t.options.toPlainOnly||e===Kt.TransformationType.CLASS_TO_PLAIN))})).map((function(t){return t.propertyName}))},t.prototype.getExcludedProperties=function(t,e){return this.getExcludedMetadatas(t).filter((function(t){return!t.options||(!0===t.options.toClassOnly&&!0===t.options.toPlainOnly||(!0===t.options.toClassOnly?e===Kt.TransformationType.CLASS_TO_CLASS||e===Kt.TransformationType.PLAIN_TO_CLASS:!0!==t.options.toPlainOnly||e===Kt.TransformationType.CLASS_TO_PLAIN))})).map((function(t){return t.propertyName}))},t.prototype.clear=function(){this._typeMetadatas.clear(),this._exposeMetadatas.clear(),this._excludeMetadatas.clear(),this._ancestorsMap.clear()},t.prototype.getMetadata=function(t,e){var n,r=t.get(e);r&&(n=Array.from(r.values()).filter((function(t){return void 0!==t.propertyName})));for(var o=[],i=0,a=this.getAncestors(e);i<a.length;i++){var s=a[i],c=t.get(s);if(c){var u=Array.from(c.values()).filter((function(t){return void 0!==t.propertyName}));o.push.apply(o,u)}}return o.concat(n||[])},t.prototype.findMetadata=function(t,e,n){var r=t.get(e);if(r){var o=r.get(n);if(o)return o}for(var i=0,a=this.getAncestors(e);i<a.length;i++){var s=a[i],c=t.get(s);if(c){var u=c.get(n);if(u)return u}}},t.prototype.findMetadatas=function(t,e,n){var r,o=t.get(e);o&&(r=o.get(n));for(var i=[],a=0,s=this.getAncestors(e);a<s.length;a++){var c=s[a],u=t.get(c);u&&u.has(n)&&i.push.apply(i,u.get(n))}return i.reverse().concat((r||[]).reverse())},t.prototype.getAncestors=function(t){if(!t)return[];if(!this._ancestorsMap.has(t)){for(var e=[],n=Object.getPrototypeOf(t.prototype.constructor);void 0!==n.prototype;n=Object.getPrototypeOf(n.prototype.constructor))e.push(n);this._ancestorsMap.set(t,e)}return this._ancestorsMap.get(t)},t}();e.MetadataStorage=n}));T(Wt);Wt.MetadataStorage;var Vt=E((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.defaultMetadataStorage=new Wt.MetadataStorage}));T(Vt);Vt.defaultMetadataStorage;var Kt=E((function(t,e){var n;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.PLAIN_TO_CLASS=0]="PLAIN_TO_CLASS",t[t.CLASS_TO_PLAIN=1]="CLASS_TO_PLAIN",t[t.CLASS_TO_CLASS=2]="CLASS_TO_CLASS"}(n=e.TransformationType||(e.TransformationType={}));var r=function(){function t(t,e){this.transformationType=t,this.options=e,this.recursionStack=new Set}return t.prototype.transform=function(t,e,r,i,a,s){var c=this;if(void 0===s&&(s=0),Array.isArray(e)||e instanceof Set){var u=i&&this.transformationType===n.PLAIN_TO_CLASS?function(t){var e=new t;if(!(e instanceof Set||"push"in e))return[];return e}(i):[];return e.forEach((function(e,o){var i=t?t[o]:void 0;if(c.options.enableCircularCheck&&c.isCircular(e))c.transformationType===n.CLASS_TO_CLASS&&(u instanceof Set?u.add(e):u.push(e));else{var a=void 0;if("function"!=typeof r&&r&&r.options&&r.options.discriminator&&r.options.discriminator.property&&r.options.discriminator.subTypes){if(c.transformationType===n.PLAIN_TO_CLASS){a=r.options.discriminator.subTypes.find((function(t){return t.name===e[r.options.discriminator.property]}));var f={newObject:u,object:e,property:void 0},l=r.typeFunction(f);a=void 0===a?l:a.value,r.options.keepDiscriminatorProperty||delete e[r.options.discriminator.property]}c.transformationType===n.CLASS_TO_CLASS&&(a=e.constructor),c.transformationType===n.CLASS_TO_PLAIN&&(e[r.options.discriminator.property]=r.options.discriminator.subTypes.find((function(t){return t.value===e.constructor})).name)}else a=r;var p=c.transform(i,e,a,void 0,e instanceof Map,s+1);u instanceof Set?u.add(p):u.push(p)}})),u}if(r!==String||a){if(r!==Number||a){if(r!==Boolean||a){if((r===Date||e instanceof Date)&&!a)return e instanceof Date?new Date(e.valueOf()):null==e?e:new Date(e);if(o()&&(r===Buffer||e instanceof Buffer)&&!a)return null==e?e:Buffer.from(e);if("object"==typeof e&&null!==e){r||e.constructor===Object||(r=e.constructor),!r&&t&&(r=t.constructor),this.options.enableCircularCheck&&this.recursionStack.add(e);var f=this.getKeys(r,e),l=t||{};t||this.transformationType!==n.PLAIN_TO_CLASS&&this.transformationType!==n.CLASS_TO_CLASS||(l=a?new Map:r?new r:{});for(var p=function(o){var i=o,c=o,u=o;if(!d.options.ignoreDecorators&&r)if(d.transformationType===n.PLAIN_TO_CLASS)(f=Vt.defaultMetadataStorage.findExposeMetadataByCustomName(r,o))&&(u=f.propertyName,c=f.propertyName);else if(d.transformationType===n.CLASS_TO_PLAIN||d.transformationType===n.CLASS_TO_CLASS){var f;(f=Vt.defaultMetadataStorage.findExposeMetadata(r,o))&&f.options&&f.options.name&&(c=f.options.name)}var p=void 0;p=e instanceof Map?e.get(i):e[i]instanceof Function?e[i]():e[i];var h=void 0,y=p instanceof Map;if(r&&a)h=r;else if(r){var v=Vt.defaultMetadataStorage.findTypeMetadata(r,u);if(v){var m={newObject:l,object:e,property:u},g=v.typeFunction?v.typeFunction(m):v.reflectedType;v.options&&v.options.discriminator&&v.options.discriminator.property&&v.options.discriminator.subTypes?e[i]instanceof Array?h=v:(d.transformationType===n.PLAIN_TO_CLASS&&(h=void 0===(h=v.options.discriminator.subTypes.find((function(t){if(p&&v.options.discriminator.property in p)return t.name===p[v.options.discriminator.property]})))?g:h.value,v.options.keepDiscriminatorProperty||p&&v.options.discriminator.property in p&&delete p[v.options.discriminator.property]),d.transformationType===n.CLASS_TO_CLASS&&(h=p.constructor),d.transformationType===n.CLASS_TO_PLAIN&&(p[v.options.discriminator.property]=v.options.discriminator.subTypes.find((function(t){return t.value===p.constructor})).name)):h=g,y=y||v.reflectedType===Map}else if(d.options.targetMaps)d.options.targetMaps.filter((function(t){return t.target===r&&!!t.properties[u]})).forEach((function(t){return h=t.properties[u]}));else if(d.options.enableImplicitConversion&&d.transformationType===n.PLAIN_TO_CLASS){var b=Reflect.getMetadata("design:type",r.prototype,u);b&&(h=b)}}var _=Array.isArray(e[i])?d.getReflectedType(r,u):void 0,S=t?t[i]:void 0;if(l.constructor.prototype){var w=Object.getOwnPropertyDescriptor(l.constructor.prototype,c);if((d.transformationType===n.PLAIN_TO_CLASS||d.transformationType===n.CLASS_TO_CLASS)&&(w&&!w.set||l[c]instanceof Function))return"continue"}if(d.options.enableCircularCheck&&d.isCircular(p)){if(d.transformationType===n.CLASS_TO_CLASS){E=p;E=d.applyCustomTransformations(E,r,o,e,d.transformationType),l instanceof Map?l.set(c,E):l[c]=E}}else{var T=d.transformationType===n.PLAIN_TO_CLASS?c:o,E=void 0;d.transformationType===n.CLASS_TO_PLAIN?(E=e[T],E=d.applyCustomTransformations(E,r,T,e,d.transformationType),E=e[T]===E?p:E,E=d.transform(S,E,h,_,y,s+1)):(E=d.transform(S,p,h,_,y,s+1),E=d.applyCustomTransformations(E,r,T,e,d.transformationType)),l instanceof Map?l.set(c,E):l[c]=E}},d=this,h=0,y=f;h<y.length;h++){p(y[h])}return this.options.enableCircularCheck&&this.recursionStack.delete(e),l}return e}return null==e?e:Boolean(e)}return null==e?e:Number(e)}return null==e?e:String(e)},t.prototype.applyCustomTransformations=function(t,e,n,r,o){var i=this,a=Vt.defaultMetadataStorage.findTransformMetadatas(e,n,this.transformationType);return void 0!==this.options.version&&(a=a.filter((function(t){return!t.options||i.checkVersion(t.options.since,t.options.until)}))),(a=this.options.groups&&this.options.groups.length?a.filter((function(t){return!t.options||i.checkGroups(t.options.groups)})):a.filter((function(t){return!t.options||!t.options.groups||!t.options.groups.length}))).forEach((function(e){t=e.transformFn(t,r,o)})),t},t.prototype.isCircular=function(t){return this.recursionStack.has(t)},t.prototype.getReflectedType=function(t,e){if(t){var n=Vt.defaultMetadataStorage.findTypeMetadata(t,e);return n?n.reflectedType:void 0}},t.prototype.getKeys=function(t,e){var r=this,o=Vt.defaultMetadataStorage.getStrategy(t);"none"===o&&(o=this.options.strategy||"exposeAll");var i=[];if("exposeAll"===o&&(i=e instanceof Map?Array.from(e.keys()):Object.keys(e)),!this.options.ignoreDecorators&&t){var a=Vt.defaultMetadataStorage.getExposedProperties(t,this.transformationType);this.transformationType===n.PLAIN_TO_CLASS&&(a=a.map((function(e){var n=Vt.defaultMetadataStorage.findExposeMetadata(t,e);return n&&n.options&&n.options.name?n.options.name:e}))),i=this.options.excludeExtraneousValues?a:i.concat(a);var s=Vt.defaultMetadataStorage.getExcludedProperties(t,this.transformationType);s.length>0&&(i=i.filter((function(t){return-1===s.indexOf(t)}))),void 0!==this.options.version&&(i=i.filter((function(e){var n=Vt.defaultMetadataStorage.findExposeMetadata(t,e);return!n||!n.options||r.checkVersion(n.options.since,n.options.until)}))),i=this.options.groups&&this.options.groups.length?i.filter((function(e){var n=Vt.defaultMetadataStorage.findExposeMetadata(t,e);return!n||!n.options||r.checkGroups(n.options.groups)})):i.filter((function(e){var n=Vt.defaultMetadataStorage.findExposeMetadata(t,e);return!(n&&n.options&&n.options.groups&&n.options.groups.length)}))}return this.options.excludePrefixes&&this.options.excludePrefixes.length&&(i=i.filter((function(t){return r.options.excludePrefixes.every((function(e){return t.substr(0,e.length)!==e}))}))),i=i.filter((function(t,e,n){return n.indexOf(t)===e}))},t.prototype.checkVersion=function(t,e){var n=!0;return n&&t&&(n=this.options.version>=t),n&&e&&(n=this.options.version<e),n},t.prototype.checkGroups=function(t){return!t||this.options.groups.some((function(e){return-1!==t.indexOf(e)}))},t}();function o(){try{return Buffer,!0}catch(t){}return!1}e.TransformOperationExecutor=r,e.testForBuffer=o}));T(Kt);Kt.TransformationType,Kt.TransformOperationExecutor,Kt.testForBuffer;var Jt=E((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.prototype.classToPlain=function(t,e){return new Kt.TransformOperationExecutor(Kt.TransformationType.CLASS_TO_PLAIN,e||{}).transform(void 0,t,void 0,void 0,void 0,void 0)},t.prototype.classToPlainFromExist=function(t,e,n){return new Kt.TransformOperationExecutor(Kt.TransformationType.CLASS_TO_PLAIN,n||{}).transform(e,t,void 0,void 0,void 0,void 0)},t.prototype.plainToClass=function(t,e,n){return new Kt.TransformOperationExecutor(Kt.TransformationType.PLAIN_TO_CLASS,n||{}).transform(void 0,e,t,void 0,void 0,void 0)},t.prototype.plainToClassFromExist=function(t,e,n){return new Kt.TransformOperationExecutor(Kt.TransformationType.PLAIN_TO_CLASS,n||{}).transform(t,e,void 0,void 0,void 0,void 0)},t.prototype.classToClass=function(t,e){return new Kt.TransformOperationExecutor(Kt.TransformationType.CLASS_TO_CLASS,e||{}).transform(void 0,t,void 0,void 0,void 0,void 0)},t.prototype.classToClassFromExist=function(t,e,n){return new Kt.TransformOperationExecutor(Kt.TransformationType.CLASS_TO_CLASS,n||{}).transform(e,t,void 0,void 0,void 0,void 0)},t.prototype.serialize=function(t,e){return JSON.stringify(this.classToPlain(t,e))},t.prototype.deserialize=function(t,e,n){var r=JSON.parse(e);return this.plainToClass(t,r,n)},t.prototype.deserializeArray=function(t,e,n){var r=JSON.parse(e);return this.plainToClass(t,r,n)},t}();e.ClassTransformer=n}));T(Jt);Jt.ClassTransformer;var Qt=E((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,n,r,o){this.target=t,this.propertyName=e,this.reflectedType=n,this.typeFunction=r,this.options=o};e.TypeMetadata=n}));T(Qt);Qt.TypeMetadata;var Xt=E((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,n){this.target=t,this.propertyName=e,this.options=n};e.ExposeMetadata=n}));T(Xt);Xt.ExposeMetadata;var Gt=E((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,n){this.target=t,this.propertyName=e,this.options=n};e.ExcludeMetadata=n}));T(Gt);Gt.ExcludeMetadata;var $t=E((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,n,r){this.target=t,this.propertyName=e,this.transformFn=n,this.options=r};e.TransformMetadata=n}));T($t);$t.TransformMetadata;var Yt=E((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Transform=function(t,e){return function(n,r){var o=new $t.TransformMetadata(n.constructor,r,t,e);Vt.defaultMetadataStorage.addTransformMetadata(o)}},e.Type=function(t,e){return function(n,r){var o=Reflect.getMetadata("design:type",n,r),i=new Qt.TypeMetadata(n.constructor,r,o,t,e);Vt.defaultMetadataStorage.addTypeMetadata(i)}},e.Expose=function(t){return function(e,n){var r=new Xt.ExposeMetadata(e instanceof Function?e:e.constructor,n,t||{});Vt.defaultMetadataStorage.addExposeMetadata(r)}},e.Exclude=function(t){return function(e,n){var r=new Gt.ExcludeMetadata(e instanceof Function?e:e.constructor,n,t||{});Vt.defaultMetadataStorage.addExcludeMetadata(r)}},e.TransformClassToPlain=function(t){return function(e,n,r){var o=new Jt.ClassTransformer,i=r.value;r.value=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=i.apply(this,e),a=!!r&&("object"==typeof r||"function"==typeof r)&&"function"==typeof r.then;return a?r.then((function(e){return o.classToPlain(e,t)})):o.classToPlain(r,t)}}},e.TransformClassToClass=function(t){return function(e,n,r){var o=new Jt.ClassTransformer,i=r.value;r.value=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=i.apply(this,e),a=!!r&&("object"==typeof r||"function"==typeof r)&&"function"==typeof r.then;return a?r.then((function(e){return o.classToClass(e,t)})):o.classToClass(r,t)}}},e.TransformPlainToClass=function(t,e){return function(n,r,o){var i=new Jt.ClassTransformer,a=o.value;o.value=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=a.apply(this,n),s=!!o&&("object"==typeof o||"function"==typeof o)&&"function"==typeof o.then;return s?o.then((function(n){return i.plainToClass(t,n,e)})):i.plainToClass(t,o,e)}}}}));T(Yt);Yt.Transform,Yt.Type,Yt.Expose,Yt.Exclude,Yt.TransformClassToPlain,Yt.TransformClassToClass,Yt.TransformPlainToClass;var Zt=E((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=Jt;e.ClassTransformer=n.ClassTransformer,function(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}(Yt);var r=new Jt.ClassTransformer;e.classToPlain=function(t,e){return r.classToPlain(t,e)},e.classToPlainFromExist=function(t,e,n){return r.classToPlainFromExist(t,e,n)},e.plainToClass=function(t,e,n){return r.plainToClass(t,e,n)},e.plainToClassFromExist=function(t,e,n){return r.plainToClassFromExist(t,e,n)},e.classToClass=function(t,e){return r.classToClass(t,e)},e.classToClassFromExist=function(t,e,n){return r.classToClassFromExist(t,e,n)},e.serialize=function(t,e){return r.serialize(t,e)},e.deserialize=function(t,e,n){return r.deserialize(t,e,n)},e.deserializeArray=function(t,e,n){return r.deserializeArray(t,e,n)},function(t){t[t.PLAIN_TO_CLASS=0]="PLAIN_TO_CLASS",t[t.CLASS_TO_PLAIN=1]="CLASS_TO_PLAIN",t[t.CLASS_TO_CLASS=2]="CLASS_TO_CLASS"}(e.TransformationType||(e.TransformationType={}))}));T(Zt);Zt.ClassTransformer,Zt.classToPlain,Zt.classToPlainFromExist;var te=Zt.plainToClass,ee=(Zt.plainToClassFromExist,Zt.classToClass,Zt.classToClassFromExist,Zt.serialize,Zt.deserialize,Zt.deserializeArray,Zt.TransformationType,function(){this.events=[]}),ne=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodes=new Set,e}return e(n,t),n.prototype.nodeBindActionHandler=function(t){var e=this;t.childNodes&&t.childNodes.forEach((function(t){e.nodeBindActionHandler(t)}));for(var n=t.attributes||[],r=0,o=n.length;r<o;++r){var i=void 0;if((i=n instanceof NamedNodeMap?n.item(r):n[r])&&"action-data"===i.name){var a=te(ee,JSON.parse(i.value));a instanceof ee&&a.events.forEach((function(n){t.addEventListener(n,e.listener.bind(e)),e.nodes.add({node:t,event:n,handler:e.listener})}))}}},n.prototype.getCurrentElement=function(t){var e=t.outerHTML.match("<.+?>");return e&&e[0]||""},n.prototype.listener=function(t){if(t instanceof MouseEvent)this.collect({msg:t.target instanceof HTMLElement?this.getCurrentElement(t.target):"",ms:"action",ml:"info",at:t.type,el:t.target instanceof HTMLElement?this.getCurrentElement(t.target):void 0,x:t.x,y:t.y});else if(t instanceof DragEvent)this.collect({msg:t.target instanceof HTMLElement?this.getCurrentElement(t.target):"",ms:"action",ml:"info",at:t.type,el:t.target instanceof HTMLElement?this.getCurrentElement(t.target):void 0,x:t.x,y:t.y});else if(t instanceof TouchEvent)for(var e=t.changedTouches.length,n=0;n<e;++n)this.collect({msg:""+t.type,ms:"action",ml:"info",at:t.type,el:t.target instanceof HTMLElement?this.getCurrentElement(t.target):void 0,x:t.changedTouches[n].clientX,y:t.changedTouches[n].clientY,c:e>1?n:void 0});else t instanceof FocusEvent?this.collect({msg:t.target instanceof HTMLElement?this.getCurrentElement(t.target):"",ms:"action",ml:"info",at:t.type,el:t.target instanceof HTMLElement?this.getCurrentElement(t.target):void 0}):t instanceof KeyboardEvent?this.collect({msg:t.type+" "+t.key,ms:"action",ml:"info",at:t.type,key:t.key}):t instanceof InputEvent?this.collect({msg:t.inputType+" "+t.data,ms:"action",ml:"info",at:t.type}):this.collect({msg:""+t,ms:"action",ml:"info",at:t.type})},n.prototype.start=function(){var t=this;this.observer=new MutationObserver((function(e,n){e.forEach((function(e){t.nodeBindActionHandler(e.target)}))})),this.observer.observe(window.document.body,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["action-data"]})},n.prototype.stop=function(){this.nodes.forEach((function(t){t.node&&t.node.removeEventListener(t.event,t.handler),t.node=null})),this.nodes.clear(),this.observer.disconnect(),this.observer.takeRecords(),delete this.observer},n}(Ut),re=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.listener=function(t){t.stopPropagation(),t.preventDefault(),this.collect({msg:t.reason,ms:"uncaught",ml:"error"})},n.prototype.start=function(){f("unhandledrejection",this.listener.bind(this))},n.prototype.stop=function(){l("unhandledrejection",this.listener.bind(this))},n}(Ut),oe=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.hackState=function(t){v(history,t,(function(e,n,r){v(window,"onpopstate",(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return window._replace_center_.onpopstate.apply(this,e)}));var o=location.href,i=window._replace_center_[t].apply(history,[e,n,r]);if(!r||r===o)return i;try{var a=o.split("#"),s=r.split("#"),c=h(a[0]),u=h(s[0]),f=a[1]&&a[1].replace(/^\/?(.*)/,"$1"),l=s[1]&&s[1].replace(/^\/?(.*)/,"$1");c!==u?p("historystatechanged",u):f!==l&&p("historystatechanged",l)}catch(t){}return i}))},n.prototype.dehackState=function(t){m(history,t),m(window,"onpopstate")},n.prototype.handleHashchange=function(t){var e=d(location.hash.toLowerCase());this.collect(e)},n.prototype.collect=function(e){t.prototype.collect.call(this,{dot:document.title,dol:location.href,dr:document.referrer,dpr:window.devicePixelRatio,de:document.charset,page:e||window.location.href,msg:"",ms:"pv",ml:"info"})},n.prototype.handleHistorystatechange=function(t){var e=d(t.detail.toLowerCase());this.collect(e)},n.prototype.start=function(){this.hackState("pushState"),this.hackState("replaceState"),f("hashchange",this.handleHashchange.bind(this)),f("historystatechanged",this.handleHistorystatechange.bind(this)),this.collect()},n.prototype.stop=function(){this.dehackState("pushState"),this.dehackState("replaceState"),l("hashchange",this.handleHashchange.bind(this)),l("historystatechanged",this.handleHistorystatechange.bind(this))},n}(Ut),ie=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return e(r,t),r.prototype.listener=function(t){var e=this;setTimeout((function(){e.collect(n(n({},function(){if(!window.performance)return{};var t=performance.timing;return{dnst:t.domainLookupEnd-t.domainLookupStart||0,tcpt:t.connectEnd-t.connectStart||0,wit:t.responseStart-t.navigationStart||0,domt:t.domContentLoadedEventEnd-t.navigationStart||0,lodt:t.loadEventEnd-t.navigationStart||0,radt:t.fetchStart-t.navigationStart||0,rdit:t.redirectEnd-t.redirectStart||0,uodt:t.unloadEventEnd-t.unloadEventStart||0,reqt:t.responseEnd-t.requestStart||0,andt:t.domComplete-t.domInteractive||0}}()),{msg:"",ms:"performance",ml:"info"}))}),20)},r.prototype.start=function(){f("load",this.listener.bind(this))},r.prototype.stop=function(){l("load",this.listener.bind(this))},r}(Ut);return{config:i,MonitorLauncher:x,Receptacle:O,AbstarctStrategy:P,AbstractCollector:Ut,strategys:{BeaconStrategy:k,FetchStrategy:Ht,ImageStrategy:zt},collectors:{ErrorCollector:qt,UncaughtCollector:re,ActionCollector:ne,PvConllector:oe,PerformanceCollector:ie}}}));
